<!-- LAUNCHER MODAL start -->
	<div id="launcher-modal">
		<div class="launcher-modal-overlay" onclick="hideModal()">
			<i class="fa fa-times launcher-widget-button"></i>
		</div>
		<div id="launcher-modal-panel">
			<form id="quicksearch" method="post">
				<input type="hidden" name="do" value="search">
				<input type="hidden" name="subaction" value="search">
				<div class="search-box" style="color:#FFF">
					<span name="spotlight" class="fa fa-fire" style="left:0px;font-size:25px;padding: 5px;margin-top: 2px;" title="Центр внимания"></span>
					<span name="feed" class="fa fa-feed" title="Лента" style="border:0;font-size:25px;transform: scale(-1, 1);padding: 5px;margin-top:2px;"></span>
					<span name="gallery" class="fa fa-caret-square-o-right" style="left:30px;font-size:25px;padding: 5px;margin-top: 2px;" title="Галерея"></span>
					<span name="contact" class="fa fa-phone" style="left:30px;font-size:25px;padding: 5px;margin-top: 2px;" title="Контакты"></span>
					<span name="faq" class="fa fa-question-circle" style="left:30px;font-size:25px;padding: 5px;margin-top: 2px;" title="Вопросы"></span>

					<input id="story" name="story" placeholder="Поиск по сайту..." type="text">
				</div>
			</form>
		</div>
		<div id="launcher-modal-content" style="margin-top:250px;overflow: auto;height: 500px;">
		</div>
	</div>
<!-- LAUNCHER MODAL end -->
<!-- LAUNCHER WIDGETS start -->
	<div id="launcher-widgets">
		<i name="contact" id="contact-launcher-widget" class="fa fa-phone launcher-widget-button" onclick="contactShow()"></i>
		<i name="spotlight" id="searh-launcher-widget" class="fa fa-search launcher-widget-button" onclick="spotlightShow()"></i>
	</div>
<!-- LAUNCHER WIDGETS end -->
<script>
	class launcher{
		constructor(obj){
			this.modal = obj;
			this.modal.hide();
		}
		hide(){
			this.modal.fadeOut('fast');
			try{
				history.pushState(null, null, location.pathname);
			}catch{}
		}
		update(section){
			history.pushState(null, null, location.pathname+'?'+section);
			$('#launcher-modal-content').html(section);
			$('#launcher-modal-content').load(section+'.html');
			$(".search-box span").each(function(i,e){
				$(e).removeClass("red");
			});
			$(".search-box span[name='"+section+"']").addClass("red");
			this.modal.fadeIn('slow');
		}
	}

	const launcher = new launcher($('#launcher-modal'));
	$(".search-box span").on("click", function(){
		launcher.update($(this).attr('name'));
	});
	$("#launcher-widgets i").on("click", function(){
		launcher.update($(this).attr('name'));
	});
	if (location.search){
		launcher.update(location.search.substr(1));
	}



	// //1. INIT
	// const launcherModal = $('#launcher-modal');
	// modalHide(true);

	// //2. CLOSE (immediate - плавно закрыть или моментально)
	// function launcherModalHide(immediate = false) {
	// 	if (immediate) {
	// 		launcherModal.hide();
	// 	} else {
	// 		launcherModal.fadeOut('fast');
	// 		try{
	// 			history.pushState(null, null,location.pathname);
	// 		}catch{}
	// 	}
	// }
	// //3. OPEN
	// //3.1 Обновление модального окна
	// function launcherModalUpdate(section){
	// 	history.pushState(null, null,location.pathname+'?'+section);
	// 	$('#launcher-modal-content').html(section);
	// 	$('#launcher-modal-content').load(section+'.html');
	// 	$(".search-box span").each(function(i,e){
	// 		$(e).removeClass("red");
	// 	});
	// 	$(".search-box span[name='"+section+"']").addClass("red");
	// 	launcherModal.fadeIn('slow');
	// }
	// //3.2 События срабатывания
	// $(".search-box span").on("click", function(){
	// 	launcherModalUpdate($(this).attr('name'))
	// });
	// $("#launcher-widgets i").on("click", function(){
	// 	launcherModalUpdate($(this).attr('name'));
	// });
	// if (location.search){
	// 	launcherModalUpdate(location.search.substr(1));
	// }
</script>